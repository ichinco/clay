<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>
Test CRUD of Image Points 
</title>
<link href='http://fonts.googleapis.com/css?family=Open+Sans:300,400' 
   rel='stylesheet' type='text/css'>
<style>
body { 
   font-family: 'Open Sans', sans-serif;
   width: 100%; 
   height: 100%; 
   overflow: hidden;
}

a
{
   font-weight: 400;
   color: #aef;
   cursor: pointer;
}

.shadow
{
  -moz-box-shadow:    1px 1px 2px 2px #ccc;
  -webkit-box-shadow: 1px 1px 2px 2px #ccc;
  box-shadow:         1px 1px 2px 2px #ccc;
}

.shine
{
   -moz-box-shadow: 0px 0px 3px 1px white;
   -webkit-box-shadow: 0px 0px 3px 1px white;
   box-shadow:         0px 0px 3px 1px white;
}

.screen
{
   display: block;
   position: absolute; 
   bottom: 0; 
   width: 100%; 
   height: 100%; 
   z-index: 1000; 
   background-color: white; 
   -moz-opacity: .75; 
   -webkit-opacity: .75; 
   opacity: .75; 
   filter: alpha(opacity=75); 
}

.disabled
{
   visibility: hidden;
}

#fullImage
{
   display: none;
   position: relative;
   background-color: #999;
   margin-left: auto;
   margin-right: auto;

   max-height: 500px;
   width: auto;
   max-width: 610px;
   height: auto;
}

.spaceFiller
{
   display: block;
   position: relative;
   bottom: 0px;
   height: 50px;
   color: #fff;
   top: 50px;
}

a.addPointButton 
{
   display: inline;
   font-family: 'Open Sans', sans-serif;
   color: #069;
   margin: -10px 0px 5px 0px;
   font-weight: 400;
}

a.addPointButton:hover
{
   color: black;
}

#imageGalleryContainer { 
   display: block;
   position: absolute; 
   top: 0; 
   width: 99.4%; 
   min-height: 100%; 

   overflow-y: auto;
}

#imageGallery
{
   position: relative;
   top: 50px;
   width: 800px;
   border: #aaa solid 1px;
   -moz-border-radius: 5px;
   -webkit-border-radius: 5px;
   border-radius: 5px;
   position: relative;
   margin-left: auto;
   margin-right: auto;
   background-color: white;
   z-index: 2001;
   overflow: hidden;
}

#imageContainer
{
   position: relative;
   top: 5px;
   left: 5px;
   background-color: #ccc; 
   width: 610px;
   height: 500px;

   text-align: center;
   vertical-align: middle;
   display: table-cell;
   overflow: hidden;
}

#pointDetailListContainer
{
   position: absolute;
   right: 5px;
   top: 0px;
   height: 500px;
   width: 154px;
   background-color: white;

   border-left: #eee solid 1px;

   padding: 10px;
   color: #069;
   font-weight: 100;
   font-size: 14px;
}
#imageSelectionBar
{
   border-top: 1px solid #999;
   border-bottom: 1px solid #999;
   position: relative;
   top: 10px;
   height: 100px;
   margin-bottom: 17px;
   background-color: white;
}

#scrollImageSelectionLeft, #scrollImageSelectionRight
{
   position: absolute;
   top: 34px;
   width: 40px;
   height: 30px;
   border-width: 0px;
   background: transparent;
   overflow: hidden;
   -moz-border-radius: 5px;
   -webkit-border-radius: 5px;
   border-radius: 5px;
   background-color: white;
   -moz-opacity: .5; 
   -webkit-opacity: .5; 
   opacity: .5; 
   filter: alpha(opacity=50); 
   cursor: pointer;
}
#scrollImageSelectionLeft:hover, #scrollImageSelectionRight:hover
{
   top: 33px;
   border: #ccc solid 1px;
   -moz-opacity: 1; 
   -webkit-opacity: 1; 
   opacity: 1; 
   filter: alpha(opacity=100); 
}

#scrollImageSelectionLeft
{
   left: 6px;
}
#scrollImageSelectionLeft:hover
{
   left: 5px;
}

#scrollImageSelectionRight
{
   right: 4px;
}
#scrollImageSelectionRight:hover
{
   right: 5px;
}

#scrollImageSelectionLeft img, #scrollImageSelectionRight img
{
   position: relative;
   top: -3px;
   height: 30px;
}
#scrollImageSelectionLeft img
{
   left: -3px;
}

#scrollImageSelectionRight img
{
   left: -32px;
}

#imageThumbContainer
{
   position: relative;
   width: 86%;
   height: 100%;
   margin-left: auto;
   margin-right: auto;
   top: 0;
   overflow: hidden;
   white-space: nowrap;
}

.imageThumb
{
   display: none;
   position: relative;
   top: 10px;
   overflow: hidden;
   height: 80px;
   width: 120px;
   margin-left: 10px;
   margin-right: 10px;
}

.imageThumb img
{
   max-height: 100px;
   width: auto;
   min-width: 100%;
   height: auto;

   -moz-opacity: .5; 
   -webkit-opacity: .5; 
   opacity: .5; 
   filter: alpha(opacity=50); 
}
.imageThumb img:hover
{
   -moz-opacity: .75; 
   -webkit-opacity: .75; 
   opacity: .75; 
   filter: alpha(opacity=75); 
}

.imageThumb img.selected
{
   -moz-opacity: 1; 
   -webkit-opacity: 1; 
   opacity: 1; 
   filter: alpha(opacity=100); 

}

#insertCaptionContainer
{
   background-color: white;
   position: relative;
   height: auto;
   top: 10px;
   bottom: 5px;
   width: auto;
   left: 0px;
   margin: 5px 5px 19px 5px;
   float: left;
}

#insertCaptionContainer form textarea 
{
   font-size: 14px;
   resize: none;
   vertical-align: top;
   min-height: 60px;
   height: auto;
   width: 535px;
   outline: none;
   overflow: auto;

   -moz-border-radius: 5px;
   -webkit-border-radius: 5px;
   border-radius: 5px;
   border-color: #069;

   -moz-opacity: .5; 
   -webkit-opacity: .5; 
   opacity: .5; 
   filter: alpha(opacity=50); 

   padding: 5px;
}

#insertCaptionContainer form textarea:focus
{
   -moz-opacity: 1; 
   -webkit-opacity: 1; 
   opacity: 100; 
   filter: alpha(opacity=100);
}

.avatar
{
   border-width: 0px;
   text-decoration: none;
}

.avatar div
{
   border-width: 0px;
   overflow: hidden;
   width: 60px;
   height: 60px;

   -moz-border-radius: 5px;
   -webkit-border-radius: 5px;
   border-radius: 5px;
   display: inline-block;
}

.avatar img
{
   margin-left: -30px;
   border: 0px solid white;
   height: 60px;
   float: left;
}

#imageGallerySideCommandPanel button
{
   background-color: white;
   color: #069;
   font-family: "Open Sans", sans-serif;
   font-size: 12px;
   border: #ccc 1px solid;
   padding: 0px;
   cursor: pointer;
}

#featureDisabledMessage
{
   position: absolute;
   height: 80px;
   background-color: black;
   width: 100%;
   top: 50%;
   margin-top: -50px;

   font-size: 14px;
   color: white;

   -moz-opacity: .85; 
   -webkit-opacity: .85; 
   opacity: .85; 
   filter: alpha(opacity=85); 

   padding-top: 20px;
   text-align: left;
   z-index: 6000;
}

#featureDisabledMessage div
{
   float: left;
   height: 100px;
   font-size: 20px;
   margin: 10px;
   vertical-align: middle;
   margin-top: 15px;
}

#featureDisabledMessage p
{
   margin: 0px 5px 0px 5px;
   vertical-align: middle;
   font-weight: 100;
}

#pointDetailList
{
   position: relative;
   margin-left: -30px;
}

#imageGalleryCommands
{
   position: absolute;
   z-index: 2000;
   width: 800px;
   left: 50%;
   top: 10px;
   margin-left: -400px;
   text-align: right;
}

#imageGalleryCommands div 
{
   font-size: 20px;
   cursor: pointer;
   color: #aaa;

   -moz-opacity: .5; 
   -webkit-opacity: .5; 
   opacity: .5; 
   filter: alpha(opacity=50); 

   display: inline;
   margin-left: 3px;
}

#imageGalleryCommands div:hover
{
   color: black;
    -moz-opacity: 1; 
   -webkit-opacity: 1; 
   opacity: 1; 
   filter: alpha(opacity=100); 
}

#imageContainer button.addPointButton
{
   position: absolute;
   width: auto;
   height: 80px;
   color: white;

   left: 0px;
   right: 0px;
   top: 50%;
   margin: -40px;
   background-color: #069;
   border: #069 solid 1px;

   -moz-opacity: .5; 
   -webkit-opacity: .5; 
   opacity: .5; 
   filter: alpha(opacity=50);
   cursor: pointer;
   display: none;
}

#imageContainer button.addPointButton:hover
{
   -moz-opacity: .85; 
   -webkit-opacity: .85; 
   opacity: .85; 
   filter: alpha(opacity=85);
}

#imageContainer button.addPointButton div
{
   position: absolute;
   border: transparent 1px solid;
   background: transparent;
   color: white;
   height: 50px;

   top: 50%;
   margin-top: -15px;
   right: 10%;
   margin-left: -67px;

   font-size: 22px;
   font-family: "Open Sans", sans-serif;
   font-weight: 100;

   -moz-border-radius: 5px;
   -webkit-border-radius: 5px;
   border-radius: 5px;
}

#imageContainer button.addPointButton div img
{
   float: left; 
   height: 30px;
   margin-right: 10px;
   vertical-align: middle;
}

#imageContainer .status
{
   position: absolute;
   bottom: 0px;
   right: 0px;
   background-color: #069;
   color: white;

   font-size: 12px;
   padding: 0px 0px 0px 5px;

   display: none;
}

#cancelAddPointButton
{
   font-family: "Open Sans", sans-serif;
   font-size: 12px;
   font-weight: 400;
   background: transparent;
   border-width: 0px;
   color: white;
   cursor: pointer;
   margin-left: 0px 5px 0px -5px;

   -moz-opacity: .55; 
   -webkit-opacity: .55; 
   opacity: .55; 
   filter: alpha(opacity=55); 
}

#cancelAddPointButton:hover
{
   -moz-opacity: 1; 
   -webkit-opacity: 1; 
   opacity: 1; 
   filter: alpha(opacity=100); 
}

#imageContainer .filler
{
   position: absolute;
   width: auto;
   left: 0px;
   top: 50%;
   margin-top: -20px;
   right: 0px;
   height: 40px;
   color: white;

   font-size: 30px;
}

</style>
<body>
<div id="imageGalleryContainer">
   <div id="imageGalleryCommands">
      <div class="closeButton">help</div>
      &sdot;
      <div class="closeButton">quicksave</div>
      &sdot;
      <div class="closeButton">close</div>
   </div>
   <div class="screen"></div>
   <div id="imageGallery" class="shadow">
      <div id="featureDisabledMessage">
         <div>
	 Oh Bummer!
	 </div>
	 <p>
	 This feature is not supported by the browser's javascript settings.
	 We are working to enable feature support for all users, and we are 
	 deeply sorry for this incovenience. For more information, please 
	 <a>click here</a>.</p>
      </div>
      <div id="pointDetailListContainer">
	 <ul id="pointDetailList">
	    Currently you have not tagged any items. <br />
	    <a class="addPointButton">Add an item.</a>
	 </ul>
      </div>
      <div id="imageContainer">
         <div class="filler">
	    no image selected...
	 </div>
	 <span></span>
	 <img id="fullImage" src="">
	 <button class="addPointButton">
	    <div>
	       <img src="http://cdn5.iconfinder.com/data/icons/TWG_Retina_Icons/64/tag_add.png">
	       add an item 
	    </div>
	 </button>
	 <div class="status">
	    tagging...<button id="cancelAddPointButton">(cancel)</button>
	 </div>
      </div>
      <div id="imageSelectionBar">
          <button id="scrollImageSelectionLeft" class="disabled">
	     <img src='http://evilwire.net/images/leftrighticons.png'>
	  </button>
	  <button id="scrollImageSelectionRight" class="disabled">
	     <img src='http://evilwire.net/images/leftrighticons.png'>
	  </button>
	  <div id="imageThumbContainer">
	     <!--
	     <div class="imageThumb">
		<img class="selected" src="http://evilwire.net/images/livingroom 1.jpg">
	     </div>-->
	     <div id="thumbTemplate" class="imageThumb">
		<img src="">
	     </div>
	  </div>
      </div>
   </div>
   <div class="spaceFiller"></div>
</div>
<div>
<h1> Content </h1>
content content content <br>
content content content
</div>
</body>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"
  type="text/javascript"></script>
<script type="text/javascript">
$(document).ready(function(evt)
{
   $('#featureDisabledMessage').css("display", "none");

   var imageList = 
   [
   {
      class: "com.clay.Image",
      dateCreated: "2012-01-27T15:57:44Z",
      design: null,
      id: 1,
      lastUpdated: "2012-01-27T15:57:44Z",
      points: [],
      url: "images/livingroom 1.jpg"
   },
   {
      class: "com.clay.Image",
      dateCreated: "2012-01-27T15:57:44Z",
      design: null,
      id: 2,
      lastUpdated: "2012-01-27T15:57:44Z",
      points: [],
      url: "images/livingroom 2.jpg"
   },
   {
      class: "com.clay.Image",
      dateCreated: "2012-01-27T15:57:44Z",
      design: {},
      id: 1,
      lastUpdated: "2012-01-27T15:57:44Z",
      points: [],
      url: "images/livingroom 3.jpg"
   },
   {
      class: "com.clay.Image",
      dateCreated: "2012-01-27T15:57:44Z",
      design: null,
      id: 2,
      lastUpdated: "2012-01-27T15:57:44Z",
      points: [],
      url: "images/livingroom 4.jpg"
   }
   ];

   var lastSelectedThumb = null;
   var lastSelectedIndex = -1;

   function selectImage(i)
   {
      if(lastSelectedIndex == i) return;

      var imageSrc = imageList[i]['url'];       
      $('#fullImage').attr("src", imageSrc);
      $('#fullImage').css("display", "block");
      var imageThumbContainer = $('#imageThumbContainer');

      if(lastSelectedThumb !== null)
      {
	 lastSelectedThumb.removeClass("selected");
      }

      lastSelectedThumb = 
	 imageThumbContainer.children('div.imageThumb:eq(' + String(i + 1) 
	 + ')').children('img');

      lastSelectedThumb.addClass('selected');
   }

   function populateSelectionBar(imageList)
   {
      for(var i = 0; i < imageList.length; i++)
      {
	 var imageSrc = imageList[i]['url'];
	 var thumbTemplateClone = $('#thumbTemplate').clone();
	 var imageThumbContainer = $('#imageThumbContainer');
	 thumbTemplateClone.css("display", "inline-block");
	 thumbTemplateClone.children('img').attr('src', imageSrc);
	 imageThumbContainer.append(thumbTemplateClone);

         (function(i)
	 {
	    thumbTemplateClone.click(function(evt)
	    {
	       selectImage(i);
	    });
	 })(i);
      }
   }

   populateSelectionBar(imageList);

});
</script>
</html>
<!--
{
   class: "com.clay.Image",
   dateCreated: "2012-01-27T15:57:44Z",
   design: {},
   id: 1,
   lastUpdated: "2012-01-27T15:57:44Z",
   points: [],
   url: ""
}
-->
